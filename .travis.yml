language: php
php:
- '7.0'
env:
  global:
  - COMMIT=${TRAVIS_COMMIT::8}
  - secure: DwSJiq4lYeAfNjLXhvZzzeNzAd5Fe2f3bIaXQIn7HU+6XSoqrjVLk2O5QtQ9T+Eil6Mx3ZxNWOt+dHoYRKmeAmvsd+PZNqGR7gda8Le/le2B0SlDWQkaAd24Mkrfms41m1rS+MJZZsrrYhGEGklouX0raCer0wViKagzrEDP1Y4BuruIPzdenwNd9Q9Lz4MsyTiw48rIo1t8BUu19PRnlW1sWKwXJZ/FjnNCRnA4PCgcd0JTvmhrrPAroHee1TXBPK0Xlbp4ny4yYxablinX2nWjTMlvsfgWnckUI0RJPQgMX4Jq7o1NbfiRiDDrCglrJKEUd1vM/J1vfcDaTDUTarI1Z50OhIyVr73tIX10xjE04cqH9rW2wl/De4kLgAeQ35l2JLCI9k7e4W/SnXaC7SLW4VtWfuREHCLdGBpC9+/ELf0AhM7Zmjyn2xsKPolS/zNGz6uNjvOo7jh6Uedg37rtgzvyRbyspBEu5r0FOSpJrN0y3anrCd1N+b1qm8nft7QheXgpDljyTY8m12lg0C1vkbCtfUGi59m3O4EYOmxnxvnfGtpNbg6zDFYxCoY8UpmgDfvpl1Ulelh6XjIJTWpscsCjJ61U3LMIFfvpG56B/EsYrB3m9+bIRG2Tk/3I61EHUoIM2aNh850i60iBHpn65kVloiU4fjg/ysar7c8=
  - secure: DIkX9QGzqmWyhFVmoWQH8IQxv3nD3viykkW9+NkDWvM0N0fX7zIH6C3CQ60bt7vg+ZO5qEHzpPuAa04dFJ6eW+C/oC2VrQv7MLpjmWgafvEb3Lyyc/TzglWS49wSqGYNFF3XtUcce3ol0bH6ubE76eLrdiu7loZ5I9yjNmIKc1wa5o3Mj7bH14Kbt/AVxAZ23gxroUXDQv2GN7iWE1GqXwQPHUS34H1wpsQeB6vEBBUIwoEb6sRYMCj27Sym2gWwHvt1BAsHQ7Xnn3MDxA8XQElbv4vLqvHqlrWNzqOZh7BR6UJ8Mhzi5mnKmXu/9qlIOFhxloWW0XMMeBDhEKRg12O0Yg87Tj76hMShkmD58C1kk5+NISId+/3f8yvXex36mYqiGPMiW1u5QAIC/g7A5mRwsSYstheqjeP/lV3f8MdqTHAQXzkzIuD2GTOLHhTYX652H8g/Q7HhKnG1txD5XFCOzLeBLJaw4GA91Jc1RCj/KMNG8gDAAWKUuxsIOE5XzcgNHPKzD2cenZINijQmWfqPp1pRy2LLVi9lgqNZOUIgBHuw3PE+B6AQ0r8btODQGBLxW+uqSg7DIwsThZhnZ2B4OxxmR1Bxv2dzANxlhF5FmeuXdUYUuhFUtlGWtGfRFzD4p0sfyvSNZi43sI+R8jS6yXbIcjbz9f2Mi69kc54=
  - secure: nxaaplwmN5WpOO6Y/PwBJPF1V0SH6H+IUyVVSSdUmRURMhf2b9jLAp5YO68B7IAvHL78yovlyqkyZI2O/vkHlGjexl08hFcyuvFwZpEMlG4m4dr6h/CXb9HQr9ObbrYzFHqAOJ0A6WouGzzQW4ei0RYfaK4gVdv5V+qOvPpnbdK4eI+THOI72ul3OVTp52aTVNtdctbbHjvQRae+wvDcDGXDfdaXws2zcIbggHEoRBsylVWh5EBn4eOzj/dXsy/0/aav9ikQoZhoQZKjeeO53iBE5zSGjQsloS0EIYOxV03nU4nVtnrFq+GQ3PK55ILqRbtnjEnK+Yjy9/QTDRo5W+XAT27Tyub3c1dZy5n6ajOKBO8vmLdfcsVWtV0qG1l3bC5NXxuju9cha72AmsZ652+gTjprhlYMR1PsFRz+UBv5iCSSkBrOl366Ef4rdS3rCC67RSH5Pvxatafuofnaq0P1uzrxESp5ywN40ezoKLZvn2X9p7bA41gv/peanw5G+ZE+utrAa//2qUAeLJRweWqTiDQQSzm0JaajsMesIH8kRu+wrhQiQZOdhDJ40+3T/A5vRz16n5tsTIgEaFsnDvLge/VQ7hUBTTvJwG2mpaecUx1BqsH7mSk4LORzOBuhETSrcusV8G9pZOY0flWdQJcVa0owky9iI2kZmoUtomQ=
script:
- ls -alh
- docker login -e $DOCKER_EMAIL -u $DOCKER_USER -p $DOCKER_PASS
- export REPO=netsyos/nodejs-nginx
- export TAG=`if [ "$TRAVIS_BRANCH" == "master" ]; then echo "latest"; else echo $TRAVIS_BRANCH;
  fi`
- docker build -f Dockerfile -t $REPO:$COMMIT .
- docker tag $REPO:$COMMIT $REPO:$TAG
- docker tag $REPO:$COMMIT $REPO:travis-$TRAVIS_BUILD_NUMBER
- docker push $REPO
after_success:
- date
notifications:
  slack:
    secure: wNtwrAvmaG/OG9g6PHPWPZQgsrBRLK4LFU3RGj4ZPgpynKNbhByYQK81qE7QBI24YInKOkgXgKTjkTSUYgowKV3YQYBXnlLfIcu8HOaThVGnefIaIK/isQyUG1RL+vTJu9KguIF4wYlXHMAjvFYBwq7lay/ZflRVVnT6N0EGoBNwXt2txgj9O/CGKHHcPMy1gX3TqMUsfddWOoQ/YzG8+WuZYxXStGMkgPNnV/uY5IAkiD0IaxFQUj/uXtBhNwzolHMjuMBn4pidLq4w7V8G013NxGmRgS62fCwONstW/oFbYYmg2CrlUlR9KTJ0SgUycDNR1rEbuaQvXKg9OR2j5TDFgai8dLiZDshUCMNgrpIQNbhfUrxL35R0HqQDmw9ObXvA7RR/NmeIV04/NMHHL0IiVPIhWpfvaqHakX/e8m3uLFA6xUU+0g6I8rbMrPjzqhceDfotA19hiq5cu3AqRfQd2oWyOrkj5snGKyp5tzk8C2utSvFgDXVXNDoj86xFQPK7eZ7OXzVdUIcr7XdaImrLQQOgrA0aV+9Z+yXOk9WPjhw8VjAuJDGyHUGLjLT8n48lLwfBdYhEwfWRR37XTDQSFkYFsTksj99vc63ZB4uy1i1qYtf8D0jSQKZTPbw4vUxj2LkUTE/QyPuWBto+sj3SVpQVFqITnb1qnbP5AyA=
